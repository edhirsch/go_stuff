commands:
# CPU
  - name: "get cpu count"
    command: "cat /proc/cpuinfo | grep processor | wc -l"
    description: "Shows the cpu cores count."

  - name: "get cpu usage"
    command: 'sar 2> /dev/null | tail -2 | head -1 | awk "{print \$4}"'
    description: "Shows the cpu utilization. Requires sysstat service."

  - name: "get cpu top processes"
    command: "ps aux | sort -nrk 3,3 | head -n 10"
    description: "Shows the cpu utilization top 10 processes."
# Memory
  - name: "get memory size"
    command: "vmstat -s -S M | grep 'total memory' | awk '{print $1}'"
    description: "Shows the ram memory size."

  - name: "get memory usage"
    command: 'sar -r 2> /dev/null | tail -2 | head -1 | awk "{print \$5}"'
    description: "Shows the memory utilization. Requires sysstat service."

  - name: "get root fs usage"
    command: "df -h /"
    description: "Shows file system details for root partition"

  - name: "get docker fs usage"
    command: "df -h /var/lib/docker"
    description: "Shows file system details for docker partition"

  - name: "get memory usage"
    command: "free -m"
    description: "Shows memory usage"

  - name: "get pid count"
    command: "ps aux | wc -l"
    description: "Shows the count for running process ids"

  - name: "get pid list"
    command: "ps aux | wc -l"
    description: "Shows the list of running process ids"

  - name: "get docker containers"
    command: "docker ps"
    description: "Shows the list of running docker containers"

  - name: "get all docker containers"
    command: "docker ps -a"
    description: "Shows the list of all docker containers(running, started, stoppped and dead)"

  - name: "get docker containers count"
    command: "docker ps | wc -l"
    description: "Shows the count for running docker containers"

  - name: "get hostname"
    command: "hostname"
    description: "Shows the node hostname"
    timeout: 5

  - name: "get uptime"
    command: 'uptime | cut -d\, -f1 | cut -d\  -f4,5'
    description: "Shows the node uptime in days or hours:minutes"

  - name: "get info"
    command: 'h=`hostname`;
  u=`uptime | cut -d\, -f1 | cut -d\  -f4,5`;
  k=`uname -r | cut -d\- -f1`;
  cc=`cat /proc/cpuinfo | grep processor | wc -l`;
  ms=`vmstat -s -S M | grep "total memory" | awk "{print \\$1}"`;
  echo -e "$h\t$u\t$k\t$cc Cores\t$ms GB"
  '
    header: "HOSTNAME\tUPTIME\tKERNEL\tCPU COUNT\tMEMORY SIZE"
    description: "Shows node info"

  - name: "get status"
    command: 'h=`hostname`;
  p=`ps aux | wc -l`;
  t=`ps -efT | wc -l`
  cu=`sar 2> /dev/null | tail -2 | head -1 | awk "{print \\$4}"`; if [[ $cu == "" ]]; then cu="N/A"; fi;
  mu=`sar -r 2> /dev/null | tail -2 | head -1 | awk "{print \\$5}"`; if [[ $mu == "" ]]; then mu="N/A"; fi;
  dfr=`df -h / --output=pcent | sed 1d`; if [[ $dfr == "" ]]; then dfr="N/A"; fi; 
  dfd=`df -h /var/lib/docker --output=pcent 2> /dev/null | sed 1d`; if [[ $dfd == "" ]]; then dfd="N/A"; fi;
  ptynr=`cat /proc/sys/kernel/pty/nr`;
  ptymax=`cat /proc/sys/kernel/pty/max`;
  echo -e "$h\t$p\t$t\t$cu\t$mu\t$dfr\t$dfd\t$ptynr/$ptymax"
  '
    header: "HOSTNAME\tPROCESSES\tTHREADS\tCPU USAGE\tMEMORY USAGE\tDISK USAGE ROOT\tDISK USAGE DOCKER\tPTYs"
    description: "Shows node status"

  - name: "install prerequisites"
    command: 'systemctl status sysstat > /dev/null || bash -c "yum install -y sysstat && systemctl start sysstat ; systemctl enable sysstat"'
    description: "Installs required packages and services"

  - name: "get random return code"
    command: 'exit $((RANDOM % 2))'
    description: "Run a command with a random return code of 0 or 1"
    